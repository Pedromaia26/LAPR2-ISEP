<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="pt"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Client.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Sem2App</a> &gt; <a href="index.source.html" class="el_package">app.domain.model</a> &gt; <span class="el_source">Client.java</span></div><h1>Client.java</h1><pre class="source lang-java linenums">package app.domain.model;


import auth.domain.model.Email;
import org.apache.commons.lang3.StringUtils;

import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Objects;

public class Client {
    /**
     * String that contains the Citizen card number
     */
    private long ccn;
    /**
     * String that contains the National Health Service Number
     */
    private long nhs;
    /**
     * String that contains the date of birth
     */
    private String birth;
    /**
     * String that contains the sex of a client
     */
    private String sex;
    /**
     * String that contains the Tax Identification Number
     */
    private long tif;
    /**
     * String that contains the email of a client
     */
    private Email email;
    /**
     * String that contains the name of a client
     */
    private String name;
    /**
     * String that contains the Phone Number of a client
     */
    private long phoneNumber;
    /**
     * String that contains the Password of a client
     */
    private String password;


    /**
     * Regists a client, receiving by parameter The Citizen Card Number, The National Health Service Number,
     * The date of birth, The sex of a client, The Tax Identification Number, The email of a client, The name of a client, The Phone Number of a client.
     * Checks all parameters rules to see if the inputted data is valid.
     *
     * @param ccn The Citizen Card Number
     * @param nhs The National Health Service Number
     * @param birth The date of birth
     * @param sex The sex of a client
     * @param tif The Tax Identification Number
     * @param email The email of a client
     * @param name The name of a client
     * @param phoneNumber The Phone Number of a client
     */
<span class="nc" id="L64">    public Client (long ccn, long nhs, String birth, String sex, long tif, String email, String name, long phoneNumber) {</span>

<span class="nc bnc" id="L66" title="All 2 branches missed.">        if (String.valueOf(ccn).length()!=16)</span>
<span class="nc" id="L67">            throw new IllegalArgumentException(&quot;Citizen Card Number must be 16 characters long&quot;);</span>

<span class="nc" id="L69">        this.ccn = ccn;</span>


<span class="nc bnc" id="L72" title="All 2 branches missed.">        if (String.valueOf(nhs).length()!=10)</span>
<span class="nc" id="L73">            throw new IllegalArgumentException(&quot;National Health Service Number must be 10 characters long&quot;);</span>

<span class="nc" id="L75">        this.nhs = nhs;</span>

<span class="nc bnc" id="L77" title="All 2 branches missed.">        if (String.valueOf(tif).length()!=10)</span>
<span class="nc" id="L78">            throw new IllegalArgumentException(&quot;Tax Identification Number must be 10 characters long&quot;);</span>

<span class="nc" id="L80">        this.tif = tif;</span>

<span class="nc bnc" id="L82" title="All 2 branches missed.">        if (String.valueOf(phoneNumber).length()!=11)</span>
<span class="nc" id="L83">            throw new IllegalArgumentException(&quot;Phone Number must be 11 characters long&quot;);</span>

<span class="nc" id="L85">        this.phoneNumber = phoneNumber;</span>
<span class="nc bnc" id="L86" title="All 2 branches missed.">        if (StringUtils.isBlank(name))</span>
<span class="nc" id="L87">            throw new IllegalArgumentException(&quot;Name cannot be Blank&quot;);</span>

<span class="nc bnc" id="L89" title="All 2 branches missed.">        if (name.length()&gt;35)</span>
<span class="nc" id="L90">            throw new IllegalArgumentException(&quot;Name cannot be longer then 35 characters&quot;);</span>


<span class="nc" id="L93">            this.name=name;</span>


        //Ver verificacao email

<span class="nc" id="L98">        this.email= new Email(email);</span>

<span class="nc bnc" id="L100" title="All 2 branches missed.">        if (StringUtils.isBlank(sex)){</span>
<span class="nc" id="L101">            sex=&quot;Undifined&quot;;</span>
        }

<span class="nc bnc" id="L104" title="All 6 branches missed.">        if(!sex.equalsIgnoreCase(&quot;MALE&quot;) &amp;&amp; !sex.equalsIgnoreCase(&quot;FEMALE&quot;) &amp;&amp; !sex.equalsIgnoreCase(&quot;UNDIFINED&quot;))</span>
<span class="nc" id="L105">            throw new IllegalArgumentException(&quot;Incorrect sex&quot;);</span>

<span class="nc" id="L107">        this.sex=sex;</span>

        //ver verificacao nascimento

<span class="nc bnc" id="L111" title="All 2 branches missed.">        if(!birth.matches(&quot;^\\d{2}/\\d{2}/\\d{4}$&quot;))</span>
<span class="nc" id="L112">            throw new IllegalArgumentException(&quot;Format of the data is incorrect&quot;);</span>

<span class="nc" id="L114">        int anosdif=calculateAge(birth);</span>

<span class="nc bnc" id="L116" title="All 2 branches missed.">        if (anosdif&lt;=0)</span>
<span class="nc" id="L117">            throw new IllegalArgumentException(&quot;Incorrect data&quot;);</span>

<span class="nc bnc" id="L119" title="All 2 branches missed.">        if (anosdif&gt;150)</span>
<span class="nc" id="L120">            throw new IllegalArgumentException(&quot;Client older than 150 years&quot;);</span>


<span class="nc" id="L123">        this.birth=birth;</span>

<span class="nc" id="L125">    }</span>

    /**
     * Change the password of a client.
     * @param password the new password of a client.
     */
    public void setPassword(String password) {
<span class="nc" id="L132">        this.password = password;</span>
<span class="nc" id="L133">    }</span>
    /**
     * Returns the integral Age of a client.
     * @return Age of a client.
     */
    public int calculateAge(String birth){
<span class="nc" id="L139">        Date date = new Date();</span>

<span class="nc" id="L141">        SimpleDateFormat formatter = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);</span>
<span class="nc" id="L142">        String data=formatter.format(date);</span>

<span class="nc" id="L144">        String[] array = data.split(&quot;/&quot;);</span>

<span class="nc" id="L146">        String[] array2 = birth.split(&quot;/&quot;);</span>
<span class="nc" id="L147">        int anosdif=Integer.parseInt(array[2])-Integer.parseInt(array2[2])-1;</span>

<span class="nc bnc" id="L149" title="All 2 branches missed.">        if (Integer.parseInt(array[1])&gt;Integer.parseInt(array2[1])){</span>
<span class="nc" id="L150">            anosdif++;</span>
        }
        else {
<span class="nc bnc" id="L153" title="All 2 branches missed.">            if (Integer.parseInt(array[1])==Integer.parseInt(array2[1])){</span>
<span class="nc bnc" id="L154" title="All 2 branches missed.">                if (Integer.parseInt(array[0])&gt;=Integer.parseInt(array2[0])){</span>
<span class="nc" id="L155">                    anosdif++;</span>
                }
            }
        }
<span class="nc" id="L159">        return anosdif;</span>
    }

    /**
     * Returns the textual description of a client.
     * @return characteristics of a client.
     */
    @Override
    public String toString() {
<span class="nc" id="L168">        return  String.format(&quot;ccn=%d, nhs=%d, birth=%s, sex=%s, tif=%d, email=%s, name=%s, phoneNumber=%d&quot;,ccn,nhs,birth,sex,tif,email,name, phoneNumber );</span>
    }

    @Override
    public boolean equals(Object o) {
<span class="nc bnc" id="L173" title="All 2 branches missed.">        if (this == o)</span>
<span class="nc" id="L174">            return true;</span>
<span class="nc bnc" id="L175" title="All 4 branches missed.">        if (o == null || getClass() != o.getClass()) return false;</span>
<span class="nc" id="L176">        Client client = (Client) o;</span>
<span class="nc bnc" id="L177" title="All 16 branches missed.">        return Objects.equals(ccn, client.ccn) &amp;&amp; Objects.equals(nhs, client.nhs) &amp;&amp; Objects.equals(birth, client.birth) &amp;&amp; Objects.equals(sex, client.sex) &amp;&amp; Objects.equals(tif, client.tif) &amp;&amp; Objects.equals(email, client.email) &amp;&amp; Objects.equals(phoneNumber, client.phoneNumber) &amp;&amp; Objects.equals(name, client.name);</span>
    }

    /**
     * Returns the email of a client.
     * @return the email of a client.
     */
    public Email getEmail() {
<span class="nc" id="L185">        return email;</span>
    }

    /**
     * Returns the Name of a client.
     * @return the name of a client.
     */
    public String getName() {
<span class="nc" id="L193">        return name;</span>
    }

    /**
     * Returns the password of a client.
     * @return the password of a client.
     */
    public String getPassword() {
<span class="nc" id="L201">        return password;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.2.201808211720</span></div></body></html>